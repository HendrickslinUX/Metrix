<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Metrix HardLine — User Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0b0b0b;
  --panel:#141414;
  --card:#1b1b1b;
  --border:rgba(255,255,255,0.08);
  --text:#fff;
  --muted:#b5b5b5;
  --accent:#ff6a00;
  --today:#ff9800;
  --overdue:#b71c1c;
  --softy:#6c757d;
  --grind:#ff9800;
  --hard:#d32f2f;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:'DM Sans',sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* HEADER */
header{
  height:64px;
  background:var(--panel);
  border-bottom:1px solid var(--border);
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 1.5rem;
}

header h1{
  font-family:'Space Grotesk',sans-serif;
  font-size:1.1rem;
}

header button{
  background:none;
  border:1px solid var(--border);
  color:white;
  padding:.45rem .9rem;
  border-radius:8px;
  cursor:pointer;
}

/* LAYOUT */
main{
  max-width:1400px;
  margin:auto;
  padding:1.5rem;
}

/* STATS */
.stats{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(160px,1fr));
  gap:1rem;
  margin-bottom:2rem;
}

.stat{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:1.2rem;
}

.stat h3{
  font-size:.8rem;
  color:var(--muted);
  margin:0;
}

.stat p{
  margin:.4rem 0 0;
  font-size:1.6rem;
  font-weight:700;
}

/* TASK BUILDER */
.task-builder{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:1.5rem;
  max-width:520px;
  margin-bottom:2rem;
}

.task-step{
  display:none;
}

.task-step.active{
  display:block;
}

.task-builder input,select{
  width:100%;
  margin-top:.8rem;
  padding:.7rem;
  border-radius:10px;
  border:1px solid var(--border);
  background:#0f0f0f;
  color:white;
  font-weight:600;
}

.task-builder button{
  margin-top:1rem;
  width:100%;
  background:var(--accent);
  color:black;
  border:none;
  padding:.8rem;
  border-radius:10px;
  font-weight:800;
  cursor:pointer;
}

/* CALENDAR */
.calendar-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:1rem;
}

.calendar-header h2{
  font-family:'Space Grotesk',sans-serif;
}

.calendar-header button{
  background:none;
  border:1px solid var(--border);
  color:white;
  padding:.4rem .7rem;
  border-radius:8px;
}

.calendar-wrapper{
  overflow-x:auto;
}

.calendar{
  display:grid;
  grid-template-columns:repeat(7,minmax(160px,1fr));
  gap:10px;
  min-width:1100px;
}

.day{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:.6rem;
  min-height:140px;
  cursor:pointer;
}

.day.today{
  outline:2px solid var(--today);
}

.day.overdue{
  border-color:var(--overdue);
}

.day-header{
  font-size:.75rem;
  color:var(--muted);
  margin-bottom:.4rem;
}

.task{
  padding:.35rem .6rem;
  border-radius:8px;
  font-size:.75rem;
  font-weight:700;
  margin-bottom:.3rem;
}

.task.overdue{
  background:var(--overdue);
}

.Softy{background:var(--softy)}
.GrindMode{background:var(--grind);color:black}
.HardLine{background:var(--hard)}
</style>
</head>

<body>

<header>
  <h1>Metrix HardLine</h1>
  <button onclick="location.href='userlogin.html'">Logout</button>
</header>

<main>

<!-- STATS -->
<section class="stats">
  <div class="stat"><h3>Total Tasks</h3><p id="total">0</p></div>
  <div class="stat"><h3>Completed</h3><p id="completed">0</p></div>
  <div class="stat"><h3>Missed</h3><p id="missed">0</p></div>
</section>

<!-- TASK BUILDER -->
<section class="task-builder">
  <h2>Create Task</h2>

  <div class="task-step active" id="step1">
    <input id="taskTitle" placeholder="Task name">
    <button onclick="nextStep(2)">Next</button>
  </div>

  <div class="task-step" id="step2">
    <input type="date" id="taskDate">
    <button onclick="nextStep(3)">Next</button>
  </div>

  <div class="task-step" id="step3">
    <select id="taskIntensity">
      <option value="Softy">Softy</option>
      <option value="GrindMode">GrindMode</option>
      <option value="HardLine">HardLine</option>
    </select>
    <button onclick="addTask()">Commit Task</button>
  </div>
</section>

<!-- CALENDAR -->
<section>
  <div class="calendar-header">
    <button onclick="changeMonth(-1)">◀</button>
    <h2 id="monthLabel"></h2>
    <button onclick="changeMonth(1)">▶</button>
  </div>

  <div class="calendar-wrapper">
    <div class="calendar" id="calendar"></div>
  </div>
</section>

</main>

<script>
let tasks = JSON.parse(localStorage.getItem("tasks")||"[]");
let current = new Date();

function nextStep(n){
  document.querySelectorAll(".task-step").forEach(s=>s.classList.remove("active"));
  document.getElementById("step"+n).classList.add("active");
}

function addTask(){
  if(!taskTitle.value||!taskDate.value)return alert("Missing info");
  tasks.push({
    title:taskTitle.value,
    date:taskDate.value,
    intensity:taskIntensity.value,
    completed:false
  });
  localStorage.setItem("tasks",JSON.stringify(tasks));
  taskTitle.value=""; taskDate.value="";
  nextStep(1);
  render();
}

function changeMonth(dir){
  current.setMonth(current.getMonth()+dir);
  render();
}

function render(){
  calendar.innerHTML="";
  const year=current.getFullYear(),month=current.getMonth();
  monthLabel.textContent=current.toLocaleString("default",{month:"long",year:"numeric"});

  const start=new Date(year,month,1);
  const end=new Date(year,month+1,0);
  const today=new Date().toISOString().split("T")[0];

  for(let d=1;d<=end.getDate();d++){
    const date=new Date(year,month,d);
    const iso=date.toISOString().split("T")[0];
    const day=document.createElement("div");
    day.className="day";
    if(iso===today)day.classList.add("today");
    if(iso<today)day.classList.add("overdue");

    day.innerHTML=`<div class="day-header">${date.toDateString()}</div>`;
    day.onclick=()=>{taskDate.value=iso;nextStep(2)}

    tasks.filter(t=>t.date===iso).forEach(t=>{
      const el=document.createElement("div");
      el.className=`task ${t.intensity} ${!t.completed&&iso<today?"overdue":""}`;
      el.textContent=t.title;
      el.onclick=e=>{
        e.stopPropagation();
        if(iso<today&&!t.completed)return;
        t.completed=!t.completed;
        localStorage.setItem("tasks",JSON.stringify(tasks));
        render();
      };
      day.appendChild(el);
    });

    calendar.appendChild(day);
  }

  total.textContent=tasks.length;
  completed.textContent=tasks.filter(t=>t.completed).length;
  missed.textContent=tasks.filter(t=>!t.completed && t.date<today).length;
}

render();
</script>

</body>
</html>

