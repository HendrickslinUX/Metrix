<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Metrix HardLine ‚Äî User Dashboard</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">

<style>
  :root {
    --bg-main: #0b0b0b;
    --bg-panel: #141414;
    --bg-card: #1b1b1b;
    --text-main: #ffffff;
    --text-muted: #b5b5b5;
    --accent: #401d65; /* login page color */
    --softy: #6c757d;
    --grind: #401d65; /* match login color */
    --hardline: #d32f2f;
  }

  * { box-sizing: border-box; }
  body {
    margin: 0;
    font-family: 'DM Sans', sans-serif;
    background: var(--bg-main);
    color: var(--text-main);
    overflow-x: hidden;
  }

  /* ===== TOP BAR ===== */
  header {
    height: 64px;
    background: var(--bg-panel);
    border-bottom: 1px solid rgba(255,255,255,0.08);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 1.5rem;
  }
  header h1 { font-family: 'Space Grotesk', sans-serif; font-size: 1.2rem; margin:0; }
  header button {
    background: var(--accent);
    color:white;
    border:none;
    padding:0.45rem 1rem;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
  }

  /* ===== MENU DRAWER ===== */
  .menu-drawer {
    position: fixed;
    top:0;
    right:-300px;
    width:300px;
    height:100%;
    background:#111;
    color:white;
    padding:1.5rem;
    transition: right 0.3s ease;
    z-index:1000;
    display:flex;
    flex-direction:column;
  }
  .menu-drawer.open { right:0; }
  .menu-drawer h2 { margin-top:0; }
  .menu-drawer button {
    margin-top:1rem;
    background: var(--accent);
    padding:.7rem;
    border:none;
    border-radius:8px;
    cursor:pointer;
    color:white;
    font-weight:bold;
  }

  /* ===== MAIN ===== */
  main { padding:1.5rem; max-width:1400px; margin:auto; }

  /* ===== STATS ===== */
  .stats {
    display:grid;
    grid-template-columns: repeat(auto-fit,minmax(160px,1fr));
    gap:1rem;
    margin-bottom:2rem;
  }
  .stat-card {
    background: var(--bg-card);
    border-radius:14px;
    padding:1.2rem;
    text-align:center;
    box-shadow:0 6px 16px rgba(0,0,0,0.3);
  }
  .stat-card h3 { margin:0; font-size:0.85rem; color:var(--text-muted); }
  .stat-card p { margin-top:0.4rem; font-size:1.6rem; font-weight:700; }

  /* ===== TASK CREATOR (STEP-BY-STEP) ===== */
  .task-form {
    background: var(--bg-card);
    border-radius:16px;
    padding:1.5rem;
    margin-bottom:2rem;
    max-width:520px;
    box-shadow:0 8px 20px rgba(0,0,0,0.25);
  }
  .task-form h2 { font-family:'Space Grotesk',sans-serif; margin:0 0 1rem 0; }

  .task-step { display:none; flex-direction:column; gap:.6rem; margin-bottom:1rem; }
  .task-step.active { display:flex; }

  .task-form input, .task-form select {
    width:100%;
    padding:.7rem;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.08);
    background:#0f0f0f;
    color:white;
    font-weight:600;
  }

  .task-form button { width:100%; background: var(--accent); color:white; border:none; padding:.75rem; border-radius:10px; font-weight:700; cursor:pointer; }

  /* ===== CALENDAR ===== */
  .calendar-controls { display:flex; justify-content:space-between; margin-bottom:.5rem; max-width:1100px; }
  .calendar-controls button { background: var(--accent); border:none; color:white; padding:.5rem 1rem; border-radius:8px; cursor:pointer; font-weight:bold; }

  .calendar-wrapper { overflow-x:auto; padding-bottom:1rem; }
  .calendar {
    display:grid;
    grid-template-columns: repeat(7,minmax(160px,1fr));
    gap:10px;
    min-width:1100px;
  }
  .day {
    background: var(--bg-card);
    border-radius:14px;
    padding:.6rem;
    min-height:140px;
    position:relative;
  }
  .day-header { font-size:.75rem; color:var(--text-muted); margin-bottom:.4rem; }

  .task {
    padding:.35rem .6rem;
    border-radius:8px;
    font-size:.75rem;
    font-weight:700;
    margin-bottom:.3rem;
    cursor:pointer;
  }
  .Softy { background: var(--softy); }
  .GrindMode { background: var(--grind); }
  .HardLine { background: var(--hardline); }

  .tooltip {
    position: fixed;
    top: 10px;
    left: 10px; /* moved to avoid menu overlap */
    background: #0b0b0b;
    color: white;
    padding: .6rem;
    border-radius: 8px;
    font-size: .85rem;
    display: none;
    z-index: 1000;
    box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    max-width: 250px;
  }

  .day.overdue { border: 2px solid red; }

  /* ===== COACH MESSAGING SYSTEM - NEW STYLES ===== */
  
  /* Coach Panel */
  .coach-panel {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 350px;
    max-height: 500px;
    background: var(--bg-panel);
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    z-index: 999;
    display: flex;
    flex-direction: column;
    border: 1px solid rgba(255,255,255,0.1);
  }
  
  .coach-panel-header {
    padding: 1rem;
    border-bottom: 1px solid rgba(255,255,255,0.08);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .coach-panel-header h3 {
    margin: 0;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 1rem;
  }
  
  .coach-panel-toggle {
    background: var(--accent);
    border: none;
    color: white;
    padding: 0.4rem 0.8rem;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
  }
  
  .coach-messages {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    display: flex;
    flex-direction: column;
    gap: 0.8rem;
  }
  
  .coach-message {
    background: var(--bg-card);
    padding: 0.8rem;
    border-radius: 10px;
    border-left: 3px solid;
  }
  
  .coach-message.level-low { border-left-color: #4caf50; }
  .coach-message.level-medium { border-left-color: #ff9800; }
  .coach-message.level-high { border-left-color: #ff5722; }
  .coach-message.level-extreme { border-left-color: #d32f2f; }
  
  .coach-message-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.4rem;
    font-size: 0.75rem;
    color: var(--text-muted);
  }
  
  .coach-message-body {
    font-size: 0.85rem;
    line-height: 1.4;
  }
  
  .coach-message-task {
    font-size: 0.75rem;
    color: var(--text-muted);
    margin-top: 0.4rem;
    font-style: italic;
  }
  
  /* Popup Notification */
  .coach-popup {
    position: fixed;
    top: 80px;
    right: 20px;
    width: 320px;
    background: linear-gradient(135deg, #1b1b1b 0%, #2a2a2a 100%);
    border-radius: 12px;
    padding: 1rem;
    box-shadow: 0 8px 24px rgba(0,0,0,0.5);
    z-index: 1001;
    animation: slideIn 0.3s ease;
    border-left: 4px solid;
  }
  
  .coach-popup.level-low { border-left-color: #4caf50; }
  .coach-popup.level-medium { border-left-color: #ff9800; }
  .coach-popup.level-high { border-left-color: #ff5722; }
  .coach-popup.level-extreme { border-left-color: #d32f2f; }
  
  @keyframes slideIn {
    from { transform: translateX(400px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  
  .coach-popup-header {
    font-weight: 700;
    margin-bottom: 0.5rem;
    font-size: 0.9rem;
  }
  
  .coach-popup-body {
    font-size: 0.85rem;
    line-height: 1.4;
    margin-bottom: 0.5rem;
  }
  
  .coach-popup-task {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-style: italic;
  }
  
  /* Mobile Alert (Banner Style) */
  .coach-mobile-alert {
    position: fixed;
    top: 64px;
    left: 0;
    right: 0;
    background: linear-gradient(135deg, #401d65 0%, #6a3a8f 100%);
    padding: 0.8rem 1rem;
    z-index: 998;
    animation: slideDown 0.4s ease;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  
  @keyframes slideDown {
    from { transform: translateY(-100%); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }
  
  .coach-mobile-alert-content {
    max-width: 1400px;
    margin: auto;
    font-size: 0.85rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .coach-mobile-alert-close {
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.75rem;
  }
  
  /* Responsive adjustments for coach panel */
  @media (max-width: 768px) {
    .coach-panel {
      width: calc(100% - 40px);
      left: 20px;
      right: 20px;
      max-height: 400px;
    }
    
    .coach-popup {
      width: calc(100% - 40px);
      left: 20px;
      right: 20px;
    }
  }
</style>
</head>

<body>

<header>
  <h1>Metrix HardLine</h1>
  <button id="menuBtn">Menu</button>
</header>

<div class="menu-drawer" id="menuDrawer">
  <h2>Menu</h2>
  <p><strong>Username:</strong> user01</p>
  <p><strong>Email:</strong> user01@email.com</p>
  <button id="closeMenu">Close Menu</button>
  <button id="drawerLogout">Logout</button>
</div>

<main>

  <!-- Stats -->
  <section class="stats">
    <div class="stat-card"><h3>Total Tasks</h3><p id="totalTasks">0</p></div>
    <div class="stat-card"><h3>Completed</h3><p id="completedTasks">0</p></div>
    <div class="stat-card"><h3>Missed</h3><p id="missedTasks">0</p></div>
  </section>

  <!-- Task Creator -->
  <section class="task-form">
    <h2>Create Task</h2>
    <div class="task-step step1 active">
      <input id="taskTitle" placeholder="Task title" />
      <button id="step1Next">Next ‚Üí</button>
    </div>
    <div class="task-step step2">
      <input id="taskDeadline" type="date"/>
      <button id="step2Next">Next ‚Üí</button>
    </div>
    <div class="task-step step3">
      <select id="taskIntensity">
        <option value="Softy">Softy</option>
        <option value="GrindMode">GrindMode</option>
        <option value="HardLine">HardLine</option>
      </select>
      <button id="addTaskBtn">Add Task</button>
    </div>
  </section>

  <!-- Calendar Controls -->
  <div class="calendar-controls">
    <button id="prevMonth">‚Üê Prev</button>
    <button id="nextMonth">Next ‚Üí</button>
  </div>

  <!-- Calendar -->
  <div class="calendar-wrapper">
    <section class="calendar" id="calendar"></section>
  </div>

</main>

<div class="tooltip" id="tooltip"></div>

<!-- COACH MESSAGING SYSTEM - NEW UI ELEMENTS -->
<div class="coach-panel" id="coachPanel">
  <div class="coach-panel-header">
    <h3>üéØ Your Coach</h3>
    <button class="coach-panel-toggle" id="coachPanelToggle">Minimize</button>
  </div>
  <div class="coach-messages" id="coachMessages">
    <!-- Messages will be dynamically inserted here -->
  </div>
</div>

<script>
  // ==================== MENU LOGIC ====================
  const menuBtn = document.getElementById('menuBtn');
  const menuDrawer = document.getElementById('menuDrawer');
  const closeMenu = document.getElementById('closeMenu');
  const drawerLogout = document.getElementById('drawerLogout');

  menuBtn.onclick = ()=> menuDrawer.classList.add('open');
  closeMenu.onclick = ()=> menuDrawer.classList.remove('open');
  drawerLogout.onclick = ()=> window.location.href='userlogin.html';

  // ==================== TASK CREATION STEP-BY-STEP ====================
  const step1 = document.querySelector('.step1');
  const step2 = document.querySelector('.step2');
  const step3 = document.querySelector('.step3');
  const step1Next = document.getElementById('step1Next');
  const step2Next = document.getElementById('step2Next');
  const addTaskBtn = document.getElementById('addTaskBtn');

  let tasks = [];

  step1Next.onclick = ()=> {
    if(!document.getElementById('taskTitle').value) return alert("Enter task title");
    step1.classList.remove('active'); step2.classList.add('active');
  };
  step2Next.onclick = ()=> {
    if(!document.getElementById('taskDeadline').value) return alert("Select date");
    step2.classList.remove('active'); step3.classList.add('active');
  };
  addTaskBtn.onclick = ()=> {
    const title = document.getElementById('taskTitle').value;
    const deadline = document.getElementById('taskDeadline').value;
    const intensity = document.getElementById('taskIntensity').value;
    if(!title||!deadline) return;
    tasks.push({title, deadline, intensity, completed:false, id: Date.now().toString()}); // Added unique ID for coach tracking
    step3.classList.remove('active'); step1.classList.add('active');
    document.getElementById('taskTitle').value='';
    document.getElementById('taskDeadline').value='';
    renderCalendar();
    updateStats();
    showNotifications();
    evaluateCoachMessages(); // NEW: Trigger coach evaluation when task is created
  };

  // ==================== CALENDAR LOGIC ====================
  const calendar = document.getElementById('calendar');
  let currentMonth = new Date();

  document.getElementById('prevMonth').onclick = ()=> {
    currentMonth.setMonth(currentMonth.getMonth()-1);
    renderCalendar();
  };
  document.getElementById('nextMonth').onclick = ()=> {
    currentMonth.setMonth(currentMonth.getMonth()+1);
    renderCalendar();
  };

  function renderCalendar(){
    calendar.innerHTML='';
    const start = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), 1);
    const end = new Date(currentMonth.getFullYear(), currentMonth.getMonth()+1, 0);
    const todayStr = new Date().toISOString().split('T')[0];

    for(let d=start.getDate(); d<=end.getDate(); d++){
      const dayDate = new Date(currentMonth.getFullYear(), currentMonth.getMonth(), d);
      const dateStr = dayDate.toISOString().split('T')[0];

      const day = document.createElement('div'); day.className='day';
      if(dateStr < todayStr) day.classList.add('overdue'); // red outline for past dates

      day.innerHTML=`<div class="day-header">${dateStr}</div>`;

      tasks.filter(t=>t.deadline===dateStr).forEach(t=>{
        const tEl=document.createElement('div');
        tEl.className=`task ${t.intensity}`;
        tEl.textContent=t.title;
        tEl.onclick=()=>{
          t.completed = !t.completed;
          updateStats(); renderCalendar(); showNotifications();
          evaluateCoachMessages(); // NEW: Re-evaluate when task is completed
        };
        day.appendChild(tEl);
      });

      calendar.appendChild(day);
    }
  }

  // ==================== STATS ====================
  function updateStats(){
    document.getElementById('totalTasks').textContent=tasks.length;
    document.getElementById('completedTasks').textContent=tasks.filter(t=>t.completed).length;
    document.getElementById('missedTasks').textContent=tasks.filter(t=>!t.completed).length;
  }

  // ==================== TOOLTIP / COACH NOTIFICATIONS ====================
  const tooltip = document.getElementById('tooltip');

  function showTooltip(message, duration=3000){
    tooltip.textContent = message;
    tooltip.style.display='block';
    setTimeout(()=>{ tooltip.style.display='none'; }, duration);
  }

  function showNotifications(){
    const todayStr = new Date().toISOString().split('T')[0];
    tasks.forEach(t=>{
      if(!t.completed && t.deadline < todayStr){
        showTooltip(`‚è∞ Overdue: ${t.title}`);
      } else if(!t.completed && t.deadline === todayStr){
        showTooltip(`‚ö†Ô∏è Due Today: ${t.title}`);
      }
    });
  }

  renderCalendar();

  // ==================== COACH MESSAGING SYSTEM - NEW CODE ====================
  
  // Coach Panel Toggle
  const coachPanel = document.getElementById('coachPanel');
  const coachPanelToggle = document.getElementById('coachPanelToggle');
  let coachPanelMinimized = false;
  
  coachPanelToggle.onclick = ()=> {
    coachPanelMinimized = !coachPanelMinimized;
    if(coachPanelMinimized) {
      coachPanel.style.maxHeight = '60px';
      coachPanelToggle.textContent = 'Expand';
      document.getElementById('coachMessages').style.display = 'none';
    } else {
      coachPanel.style.maxHeight = '500px';
      coachPanelToggle.textContent = 'Minimize';
      document.getElementById('coachMessages').style.display = 'flex';
    }
  };
  
  // Phrase Library - 100 unique phrases per urgency level
  const COACH_PHRASES = {
    low: [
      "Hey there! Just a gentle reminder about {task}. You've got this!",
      "Thinking about {task}? Now's a great time to make some progress.",
      "Small steps count! Consider tackling {task} today.",
      "Your future self will thank you for working on {task} now.",
      "Ready to shine? {task} is waiting for your attention.",
      "Let's keep the momentum going with {task}!",
      "You're doing great! Don't forget about {task}.",
      "Early bird gets the worm! {task} could use some love.",
      "Building good habits starts with {task} today.",
      "Imagine how good you'll feel when {task} is done!",
      "A little progress on {task} goes a long way.",
      "You've got time to make magic happen with {task}.",
      "Let's turn {task} into a win today!",
      "Your goals are calling! {task} is next on the list.",
      "Starting early on {task} = less stress later.",
      "Ready to level up? {task} is your opportunity.",
      "Consider this your friendly nudge for {task}.",
      "You're capable of amazing things! Start with {task}.",
      "Let's make today count by working on {task}.",
      "The best time to start {task} is now!",
      "Feeling motivated? Channel it into {task}!",
      "You've already come so far. Keep going with {task}!",
      "Small wins add up. {task} is your next victory.",
      "Let's make {task} happen together!",
      "Your dedication is inspiring! Show it with {task}.",
      "Progress over perfection! Work on {task} today.",
      "You're building something great. {task} is part of it.",
      "Let's knock {task} out while you're in the zone!",
      "The journey to success includes {task}.",
      "You've got the skills. Apply them to {task}!",
      "Every step matters. Take one toward {task}.",
      "Let's turn potential into results with {task}!",
      "You're stronger than you think! Tackle {task} now.",
      "Success is built daily. Start with {task}.",
      "Let's keep your streak going with {task}!",
      "You're on a roll! Don't stop at {task}.",
      "Feeling good? Put that energy into {task}!",
      "Let's make progress on {task} while the day is young.",
      "You deserve to feel accomplished. Finish {task}!",
      "Greatness awaits! Begin with {task}.",
      "Let's turn your vision into reality with {task}.",
      "You've got what it takes to complete {task}.",
      "Make today productive by working on {task}!",
      "Let's build momentum with {task} right now.",
      "You're doing amazing! Keep it up with {task}.",
      "Ready to feel accomplished? Start {task} today.",
      "Your commitment is admirable! Show it with {task}.",
      "Let's make {task} your focus for the next hour.",
      "You're creating your future. {task} is a building block.",
      "Stay ahead of the game by working on {task}.",
      "Let's transform {task} from pending to done!",
      "You've got this opportunity. Seize it with {task}!",
      "Consistency is key. Work on {task} today.",
      "Let's celebrate progress! Start with {task}.",
      "You're making waves! Keep going with {task}.",
      "The path to success runs through {task}.",
      "You're on track! Maintain it with {task}.",
      "Let's make {task} your priority right now.",
      "You're capable of excellence. Prove it with {task}!",
      "Ready to feel amazing? Complete {task} today.",
      "Your potential is unlimited! Channel it into {task}.",
      "Let's turn intention into action with {task}!",
      "You're building something beautiful. {task} is next.",
      "Stay focused on {task} and watch magic happen.",
      "You've got the power to finish {task} today!",
      "Let's make {task} your success story.",
      "You're worth the effort! Invest in {task} now.",
      "Progress is calling! Answer with {task}.",
      "Let's keep the energy high by working on {task}.",
      "You're creating momentum. {task} keeps it going!",
      "Ready for a win? {task} is your ticket.",
      "Let's make today memorable with {task}!",
      "You're capable of incredible things. Show it with {task}.",
      "The best version of you works on {task} today.",
      "Let's turn {task} into your next accomplishment!",
      "You've got time and talent. Use both on {task}.",
      "Stay inspired! Work on {task} while you're motivated.",
      "You're building your legacy. {task} is part of it.",
      "Let's make {task} happen before the day ends!",
      "You're on a journey to greatness. {task} is a step.",
      "Ready to excel? Focus on {task} right now.",
      "You've got the discipline. Apply it to {task}!",
      "Let's make {task} your achievement today.",
      "You're unstoppable! Prove it with {task}.",
      "Progress feels good. Experience it by doing {task}!",
      "Let's turn {task} into a victory lap.",
      "You're worthy of success. Earn it with {task}!",
      "The time is now for {task}. Let's go!",
      "You've got vision. Realize it through {task}.",
      "Let's make {task} the highlight of your day!",
      "You're building confidence. {task} strengthens it.",
      "Ready to dominate? Start with {task}.",
      "Let's transform {task} into completed!",
      "You've got determination. Direct it at {task}.",
      "Stay awesome by working on {task} today!",
      "You're creating your reality. {task} shapes it.",
      "Let's make {task} your power move!",
      "You've got this moment. Use it for {task}.",
      "Ready to be proud? Complete {task} now.",
      "Let's turn {task} into your winning moment!"
    ],
    medium: [
      "Time to focus! {task} needs your attention today.",
      "Let's get serious about {task}. Deadline is approaching.",
      "{task} won't complete itself. Time to take action!",
      "Your accountability partner here: {task} is waiting.",
      "Let's make {task} your top priority right now.",
      "No more delays! {task} requires your focus today.",
      "You committed to {task}. Let's honor that commitment.",
      "It's time to deliver on {task}. You've got this!",
      "Let's turn words into action with {task} today.",
      "{task} is calling for your immediate attention.",
      "You know what needs to be done: {task}. Let's go!",
      "Time to step up! {task} can't wait any longer.",
      "Let's get {task} moving. Procrastination ends now.",
      "Your success depends on {task}. Make it happen!",
      "No excuses today. {task} needs completion.",
      "Let's prove your dedication with {task} right now.",
      "Time is valuable. Invest it in {task} today!",
      "{task} is your responsibility. Time to own it.",
      "Let's eliminate distractions and focus on {task}.",
      "You made a commitment to {task}. Keep your word!",
      "The clock is ticking on {task}. Take action now!",
      "Let's demonstrate discipline with {task} today.",
      "Your goals demand action on {task}. Deliver!",
      "Time to be accountable for {task}. No more waiting.",
      "Let's turn pressure into performance with {task}!",
      "{task} requires your best effort today. Give it!",
      "No room for hesitation. {task} needs you now.",
      "Let's show what you're made of with {task}!",
      "Your credibility depends on completing {task}.",
      "Time to focus all energy on {task}. Let's move!",
      "Let's convert intention into results with {task}.",
      "{task} won't wait. Neither should you!",
      "Time to demonstrate commitment through {task}.",
      "Let's make {task} your statement of dedication.",
      "Your performance on {task} matters. Make it count!",
      "No more putting off {task}. Today is the day!",
      "Let's turn {task} into proof of your capability.",
      "Time is running short on {task}. Act now!",
      "Let's show discipline by completing {task} today.",
      "{task} is your opportunity to demonstrate reliability.",
      "Time to deliver results with {task}. No excuses!",
      "Let's make {task} your focus until it's done.",
      "Your reputation rides on {task}. Take it seriously!",
      "Time to convert talk into action with {task}.",
      "Let's prove your worth through {task} today!",
      "{task} demands immediate attention. Provide it!",
      "No more delays on {task}. Time to execute!",
      "Let's demonstrate professionalism with {task} now.",
      "Your commitment to {task} needs to show today.",
      "Time to get uncomfortable and tackle {task}!",
      "Let's make {task} your priority above all else.",
      "{task} is your test. Pass it with action today!",
      "Time to show real dedication with {task}.",
      "Let's turn {task} into evidence of your work ethic.",
      "Your goals require {task} completion. Deliver now!",
      "No more excuses for {task}. Time to perform!",
      "Let's demonstrate integrity by finishing {task}.",
      "{task} is waiting for your full commitment today.",
      "Time to be reliable. Complete {task} now!",
      "Let's make {task} your accountability moment.",
      "Your success story includes {task}. Write it today!",
      "No more postponing {task}. Action is required!",
      "Let's show determination through {task} completion.",
      "{task} needs your undivided attention right now.",
      "Time to step up and own {task} completely!",
      "Let's turn {task} into your credibility builder.",
      "Your word matters. Honor it with {task} today!",
      "No shortcuts on {task}. Time to do the work!",
      "Let's demonstrate excellence through {task} now.",
      "{task} is your opportunity to prove yourself.",
      "Time to be accountable. Finish {task} today!",
      "Let's make {task} your focus until completion.",
      "Your dedication shows through {task}. Demonstrate it!",
      "No more waiting on {task}. Execute immediately!",
      "Let's turn {task} into your performance statement.",
      "{task} requires commitment. Show it right now!",
      "Time to deliver on promises with {task}.",
      "Let's prove your reliability through {task} today!",
      "Your track record depends on {task}. Build it!",
      "No distractions from {task}. Total focus needed!",
      "Let's demonstrate professionalism with {task} now.",
      "{task} is your responsibility. Take it seriously!",
      "Time to show what discipline looks like with {task}.",
      "Let's make {task} your priority until it's complete.",
      "Your commitment is measured by {task}. Deliver!",
      "No excuses accepted for {task}. Time to work!",
      "Let's turn {task} into your reliability statement.",
      "{task} demands action today. Provide it now!",
      "Time to be dependable. Complete {task} immediately!",
      "Let's demonstrate integrity through {task} completion.",
      "Your word is at stake with {task}. Honor it!",
      "No more delays. {task} requires immediate action!",
      "Let's make {task} your dedication showcase today.",
      "{task} is calling. Answer with action right now!",
      "Time to prove your commitment with {task}.",
      "Let's turn {task} into your accountability win!",
      "Your performance matters. Show it through {task}!",
      "No postponing {task} any longer. Execute today!",
      "Let's demonstrate capability by completing {task} now.",
      "{task} is your test of discipline. Pass it today!"
    ],
    high: [
      "URGENT: {task} requires immediate action. No more waiting!",
      "This is serious. {task} deadline is critical. Move NOW!",
      "Zero excuses. {task} must be completed today. Period.",
      "Your performance is on the line with {task}. Deliver immediately!",
      "DROP EVERYTHING. {task} is your only priority right now!",
      "This is non-negotiable. {task} gets done today or else.",
      "Wake up call: {task} is overdue for your attention. ACT!",
      "No more games. {task} completion is mandatory right now!",
      "Your credibility is crumbling. Save it with {task} TODAY!",
      "FINAL WARNING: {task} cannot be ignored any longer!",
      "This is your line in the sand moment with {task}. Choose wisely!",
      "Enough talk. {task} demands action THIS HOUR!",
      "Your track record depends on {task} RIGHT NOW. Perform!",
      "No more tomorrow. {task} happens today or you fail!",
      "This is your moment of truth with {task}. Don't blow it!",
      "CRITICAL: {task} completion separates winners from losers!",
      "Time to prove yourself. {task} is your battleground TODAY!",
      "No wiggle room. {task} gets finished in the next 2 hours!",
      "Your reputation is bleeding out. {task} is the tourniquet!",
      "This is do or die time for {task}. What's it going to be?",
      "STOP READING. START DOING. {task} needs you NOW!",
      "Your excuses are worthless. {task} requires immediate action!",
      "This is your defining moment with {task}. Rise up NOW!",
      "No more mediocrity. {task} demands excellence immediately!",
      "Time to show backbone. {task} won't complete itself!",
      "Your commitment means nothing without {task} completion TODAY!",
      "REALITY CHECK: {task} separates talk from action. Which are you?",
      "This is your accountability moment. {task} cannot wait!",
      "No more excuses or delays. {task} is happening RIGHT NOW!",
      "Your future self is watching. Deliver on {task} today!",
      "This is pressure time. {task} shows what you're made of!",
      "WAKE UP: {task} won't give you another chance!",
      "Time to be ruthless with yourself. {task} is MANDATORY!",
      "Your word means everything. Prove it with {task} NOW!",
      "This is your crucible moment. {task} forges your character!",
      "No more comfort zone. {task} demands discomfort TODAY!",
      "URGENT PRIORITY: {task} cannot be postponed again!",
      "Your discipline is tested right now with {task}. Don't fail!",
      "This is championship level focus time for {task}!",
      "No more average. {task} requires elite execution NOW!",
      "Time to deliver under pressure. {task} is your proving ground!",
      "CRITICAL DEADLINE: {task} completion is non-negotiable today!",
      "Your integrity is on trial. {task} is the verdict!",
      "This is your performance review. {task} better be complete!",
      "No more soft commitments. {task} demands hard action NOW!",
      "Time to separate yourself from the pack with {task}!",
      "FINAL CALL: {task} happens in the next hour or you're done!",
      "Your potential means nothing without {task} completion today!",
      "This is your battlefield. {task} is the hill to take NOW!",
      "No more weak effort. {task} requires maximum intensity!",
      "Time to earn your keep. {task} is how you do it TODAY!",
      "PRESSURE MOMENT: {task} reveals your true character!",
      "Your comfort is irrelevant. {task} must be completed NOW!",
      "This is crunch time. {task} cannot be escaped!",
      "No more hiding. {task} demands you show up BIG today!",
      "Time to demonstrate grit. {task} is your opportunity NOW!",
      "CRITICAL JUNCTURE: {task} determines your trajectory!",
      "Your excuses expire today. {task} requires action immediately!",
      "This is your Spartan moment. {task} demands warrior spirit!",
      "No more weakness. {task} requires strength RIGHT NOW!",
      "Time to prove you're serious. {task} is the litmus test!",
      "URGENT DEMAND: {task} completion shows your commitment level!",
      "Your credibility hangs by a thread. {task} is the lifeline!",
      "This is high-stakes time. {task} cannot afford delay!",
      "No more half measures. {task} requires full commitment NOW!",
      "Time to show you belong. {task} is your entrance exam!",
      "CRITICAL TEST: {task} separates pretenders from contenders!",
      "Your potential is wasted without {task} completion today!",
      "This is your proving ground. {task} shows your worth NOW!",
      "No more excuses accepted. {task} demands results immediately!",
      "Time to validate your talk. {task} requires walk TODAY!",
      "PRESSURE COOKER: {task} reveals what you're truly made of!",
      "Your commitment is questioned. {task} provides the answer!",
      "This is championship mentality time for {task}. Show it!",
      "No more coasting. {task} demands peak performance NOW!",
      "Time to rise to the occasion. {task} is that occasion!",
      "CRITICAL PRIORITY: {task} completion defines you today!",
      "Your discipline is under examination. {task} is the test!",
      "This is your moment to shine or fade with {task}!",
      "No more average output. {task} requires excellence NOW!",
      "Time to demonstrate fortitude. {task} is your crucible!",
      "URGENT REQUIREMENT: {task} cannot survive another delay!",
      "Your reputation is at stake. {task} determines the outcome!",
      "This is high performance time. {task} demands intensity!",
      "No more mediocre effort. {task} requires championship level!",
      "Time to show mental toughness. {task} is the battleground!",
      "CRITICAL MOMENT: {task} reveals your true priorities!",
      "Your track record needs {task} completion RIGHT NOW!",
      "This is your defining hour. {task} cannot be ignored!",
      "No more comfort. {task} demands you stretch TODAY!",
      "Time to earn respect. {task} is how you get it NOW!",
      "PRESSURE TEST: {task} shows if you're built for this!",
      "Your future depends on {task} completion today!",
      "This is your crossroads moment. {task} determines direction!",
      "No more waiting for perfect. {task} demands action NOW!",
      "Time to prove your worth. {task} is the currency!",
      "CRITICAL EXECUTION: {task} separates pros from amateurs!",
      "Your commitment level shows through {task} RIGHT NOW!",
      "This is your opportunity to be elite with {task} today!"
    ],
    extreme: [
      "CODE RED: {task} is OVERDUE. This is your LAST chance!",
      "IMMEDIATE ACTION REQUIRED: {task} completion is CRITICAL RIGHT NOW!",
      "ALL HANDS ON DECK: {task} is in RED ZONE. Execute IMMEDIATELY!",
      "DEFCON 1: {task} cannot wait ONE MORE SECOND. MOVE!",
      "EMERGENCY: Your entire credibility rides on {task} THIS INSTANT!",
      "ZERO TOLERANCE: {task} gets done in the next 60 minutes or FAIL!",
      "FINAL ULTIMATUM: {task} completion is MANDATORY right now!",
      "CRISIS MODE: {task} has reached critical mass. ACT IMMEDIATELY!",
      "NO MERCY: {task} demands your absolute focus THIS SECOND!",
      "FULL STOP: Nothing matters except {task} completion NOW!",
      "EMERGENCY OVERRIDE: {task} is your ONLY priority until complete!",
      "MAXIMUM URGENCY: {task} cannot tolerate another minute of delay!",
      "ABSOLUTE PRIORITY: {task} takes precedence over EVERYTHING!",
      "CRITICAL FAILURE IMMINENT: {task} must be completed IMMEDIATELY!",
      "RED ALERT: {task} is in danger zone. Execute without delay!",
      "ZERO HOUR: {task} completion determines everything RIGHT NOW!",
      "EMERGENCY STATUS: {task} requires immediate mobilization!",
      "CRITICAL MASS: {task} has reached the point of no return!",
      "FINAL COUNTDOWN: {task} must be finished in next 30 minutes!",
      "SEVERE WARNING: {task} failure is NOT an option anymore!",
      "MAXIMUM ALERT: {task} demands instantaneous action NOW!",
      "CRITICAL DEADLINE: {task} cannot be postponed one more second!",
      "EMERGENCY PROTOCOL: {task} is your singular focus until done!",
      "ZERO EXCUSES: {task} happens RIGHT NOW or you're finished!",
      "CRISIS LEVEL: {task} requires immediate intervention!",
      "ABSOLUTE URGENCY: {task} cannot wait for anything!",
      "FINAL WARNING: {task} completion is required THIS INSTANT!",
      "CRITICAL SITUATION: {task} demands immediate resolution!",
      "EMERGENCY MODE: {task} is in critical state. Act NOW!",
      "MAXIMUM PRIORITY: {task} overrides all other activities!",
      "RED ZONE: {task} has entered critical territory. EXECUTE!",
      "ZERO TOLERANCE POLICY: {task} must be completed immediately!",
      "CRITICAL JUNCTURE: {task} cannot afford one more delay!",
      "EMERGENCY ACTIVATION: {task} requires full commitment NOW!",
      "ABSOLUTE DEADLINE: {task} has no more extensions available!",
      "FINAL OPPORTUNITY: {task} is your last chance to deliver!",
      "CRISIS INTERVENTION: {task} demands immediate attention!",
      "MAXIMUM URGENCY LEVEL: {task} cannot wait another moment!",
      "CRITICAL ALERT: {task} must be addressed RIGHT NOW!",
      "EMERGENCY REQUIREMENT: {task} completion is mandatory!",
      "ZERO FLEXIBILITY: {task} happens immediately or consequences!",
      "ABSOLUTE NECESSITY: {task} must be finished this instant!",
      "CRITICAL RESPONSE: {task} requires immediate action NOW!",
      "FINAL DEMAND: {task} gets done in next hour. NO EXCUSES!",
      "EMERGENCY DECLARATION: {task} is critical priority!",
      "MAXIMUM INTENSITY: {task} demands everything you have NOW!",
      "RED ALERT STATUS: {task} cannot be delayed any further!",
      "ZERO MARGIN: {task} must be executed with precision NOW!",
      "CRITICAL IMPERATIVE: {task} is non-negotiable at this point!",
      "EMERGENCY MEASURES: {task} requires immediate completion!",
      "ABSOLUTE URGENCY: {task} cannot tolerate hesitation!",
      "FINAL DIRECTIVE: {task} must be finished immediately!",
      "CRISIS POINT: {task} has reached critical threshold!",
      "MAXIMUM ALERT LEVEL: {task} demands instant action!",
      "CRITICAL NECESSITY: {task} must happen RIGHT NOW!",
      "EMERGENCY ORDER: {task} is your only task until complete!",
      "ZERO DELAY PERMITTED: {task} requires immediate execution!",
      "ABSOLUTE PRIORITY STATUS: {task} overrides everything else!",
      "FINAL CHANCE: {task} completion determines your outcome!",
      "CRISIS MANAGEMENT: {task} needs immediate resolution NOW!",
      "MAXIMUM PRIORITY LEVEL: {task} cannot wait one more second!",
      "CRITICAL EMERGENCY: {task} must be addressed this instant!",
      "RED ZONE ALERT: {task} has entered critical phase!",
      "ZERO TOLERANCE LEVEL: {task} demands immediate completion!",
      "ABSOLUTE REQUIREMENT: {task} must be finished NOW!",
      "FINAL ULTIMATUM ISSUED: {task} or face consequences!",
      "CRITICAL TIME: {task} cannot afford another delay!",
      "EMERGENCY PRIORITY: {task} requires full focus immediately!",
      "MAXIMUM URGENCY DECLARED: {task} must happen NOW!",
      "ZERO EXCUSES ACCEPTED: {task} completion is mandatory!",
      "ABSOLUTE CRITICAL: {task} is do-or-die right now!",
      "FINAL DEADLINE: {task} must be done in next 45 minutes!",
      "CRISIS ALERT: {task} has reached emergency status!",
      "MAXIMUM RESPONSE: {task} demands immediate attention!",
      "CRITICAL FAILURE POINT: {task} cannot be postponed!",
      "EMERGENCY LEVEL: {task} is your only focus until finished!",
      "ZERO DELAY TOLERANCE: {task} requires instant action!",
      "ABSOLUTE URGENCY LEVEL: {task} must happen immediately!",
      "FINAL CALL TO ACTION: {task} cannot wait any longer!",
      "CRITICAL STATE: {task} demands emergency response NOW!",
      "MAXIMUM ALERT ISSUED: {task} is critical priority!",
      "RED ALERT ACTIVE: {task} must be completed this instant!",
      "ZERO MARGIN FOR ERROR: {task} requires immediate execution!",
      "ABSOLUTE DEADLINE REACHED: {task} can't be delayed!",
      "FINAL OPPORTUNITY WINDOW: {task} must be seized NOW!",
      "CRISIS SITUATION: {task} requires immediate intervention!",
      "MAXIMUM PRIORITY DECLARED: {task} overrides all else!",
      "CRITICAL MOMENT: {task} determines everything RIGHT NOW!",
      "EMERGENCY ACTIVATION CODE: {task} is urgent priority!",
      "ZERO TOLERANCE MODE: {task} must be finished immediately!",
      "ABSOLUTE NECESSITY LEVEL: {task} cannot be ignored!",
      "FINAL WARNING ISSUED: {task} or face severe consequences!",
      "CRITICAL INTERVENTION: {task} demands immediate action!",
      "MAXIMUM URGENCY STATUS: {task} cannot wait one moment!",
      "RED ZONE CRITICAL: {task} has reached point of no return!",
      "ZERO EXCUSES MODE: {task} happens RIGHT NOW!",
      "ABSOLUTE EMERGENCY: {task} requires immediate completion!",
      "FINAL COUNTDOWN ACTIVE: {task} must be done in 20 minutes!",
      "CRISIS MODE ENGAGED: {task} is critical priority NOW!"
    ]
  };
  
  // Get localStorage key for coach messages
  function getCoachStorageKey() {
    return 'metrix_coach_messages';
  }
  
  // Get stored coach messages
  function getStoredCoachMessages() {
    const stored = localStorage.getItem(getCoachStorageKey());
    return stored ? JSON.parse(stored) : [];
  }
  
  // Save coach messages to localStorage
  function saveCoachMessages(messages) {
    localStorage.setItem(getCoachStorageKey(), JSON.stringify(messages));
  }
  
  // Get random phrase from level
  function getRandomPhrase(level, taskTitle) {
    const phrases = COACH_PHRASES[level] || COACH_PHRASES.low;
    const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];
    return randomPhrase.replace('{task}', taskTitle);
  }
  
  // Determine urgency level based on days until deadline
  function getUrgencyLevel(daysUntilDeadline) {
    if (daysUntilDeadline < 0) {
      // Overdue escalation
      const daysOverdue = Math.abs(daysUntilDeadline);
      if (daysOverdue >= 3) return 'extreme';
      if (daysOverdue >= 1) return 'high';
      return 'medium';
    } else if (daysUntilDeadline === 0) {
      return 'high'; // Deadline day
    } else if (daysUntilDeadline >= 7) {
      return 'low'; // 7+ days before deadline
    } else {
      return 'medium'; // Between 1-6 days
    }
  }
  
  // Calculate days until deadline
  function getDaysUntilDeadline(deadlineStr) {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    const deadline = new Date(deadlineStr);
    deadline.setHours(0, 0, 0, 0);
    const diffTime = deadline - today;
    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
    return diffDays;
  }
  
  // Check if message already sent today for this task
  function isMessageSentToday(taskId, messageType) {
    const messages = getStoredCoachMessages();
    const today = new Date().toISOString().split('T')[0];
    return messages.some(m => 
      m.taskId === taskId && 
      m.type === messageType && 
      m.date === today
    );
  }
  
  // Get message count for task today
  function getMessageCountToday(taskId) {
    const messages = getStoredCoachMessages();
    const today = new Date().toISOString().split('T')[0];
    return messages.filter(m => m.taskId === taskId && m.date === today).length;
  }
  
  // Send coach message to panel
  function sendCoachPanelMessage(task, level, message) {
    const messagesContainer = document.getElementById('coachMessages');
    const messageEl = document.createElement('div');
    messageEl.className = `coach-message level-${level}`;
    messageEl.innerHTML = `
      <div class="coach-message-header">
        <span>üéØ Coach</span>
        <span>${new Date().toLocaleTimeString()}</span>
      </div>
      <div class="coach-message-body">${message}</div>
      <div class="coach-message-task">Re: ${task.title}</div>
    `;
    messagesContainer.appendChild(messageEl);
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
    
    // Store message
    const storedMessages = getStoredCoachMessages();
    storedMessages.push({
      taskId: task.id,
      type: 'panel',
      level: level,
      message: message,
      date: new Date().toISOString().split('T')[0],
      timestamp: new Date().toISOString(),
      read: false
    });
    saveCoachMessages(storedMessages);
  }
  
  // Show popup notification
  function showCoachPopup(task, level, message) {
    const popup = document.createElement('div');
    popup.className = `coach-popup level-${level}`;
    popup.innerHTML = `
      <div class="coach-popup-header">üéØ Coach Alert</div>
      <div class="coach-popup-body">${message}</div>
      <div class="coach-popup-task">Task: ${task.title}</div>
    `;
    document.body.appendChild(popup);
    
    // Auto-dismiss after 5 seconds
    setTimeout(() => {
      popup.style.opacity = '0';
      setTimeout(() => popup.remove(), 300);
    }, 5000);
    
    // Store message
    const storedMessages = getStoredCoachMessages();
    storedMessages.push({
      taskId: task.id,
      type: 'popup',
      level: level,
      message: message,
      date: new Date().toISOString().split('T')[0],
      timestamp: new Date().toISOString(),
      read: false
    });
    saveCoachMessages(storedMessages);
  }
  
  // Show mobile alert
  function showCoachMobileAlert(task, level, message) {
    // Remove existing alert if present
    const existingAlert = document.querySelector('.coach-mobile-alert');
    if (existingAlert) existingAlert.remove();
    
    const alert = document.createElement('div');
    alert.className = 'coach-mobile-alert';
    alert.innerHTML = `
      <div class="coach-mobile-alert-content">
        <div><strong>üéØ Coach:</strong> ${message}</div>
        <button class="coach-mobile-alert-close" onclick="this.parentElement.parentElement.remove()">‚úï</button>
      </div>
    `;
    document.body.appendChild(alert);
    
    // Auto-dismiss after 8 seconds
    setTimeout(() => {
      if (alert.parentElement) alert.remove();
    }, 8000);
    
    // Store message
    const storedMessages = getStoredCoachMessages();
    storedMessages.push({
      taskId: task.id,
      type: 'mobile',
      level: level,
      message: message,
      date: new Date().toISOString().split('T')[0],
      timestamp: new Date().toISOString(),
      read: false
    });
    saveCoachMessages(storedMessages);
  }
  
  // Send email notification (placeholder function for future backend integration)
  function sendCoachEmail(task, level, message) {
    // Email data structure ready for backend wiring
    const emailData = {
      to: 'user01@email.com', // From menu drawer
      subject: `Coach Alert: ${task.title} - ${level.toUpperCase()} Priority`,
      body: `
        <h2>üéØ Your Coach Has a Message</h2>
        <p><strong>Urgency Level:</strong> ${level.toUpperCase()}</p>
        <p><strong>Task:</strong> ${task.title}</p>
        <p><strong>Deadline:</strong> ${task.deadline}</p>
        <hr>
        <p>${message}</p>
        <hr>
        <p><em>This is an automated message from your Metrix HardLine Coach system.</em></p>
      `,
      timestamp: new Date().toISOString()
    };
    
    // Log for now (replace with actual API call when backend is ready)
    console.log('üìß COACH EMAIL TRIGGERED:', emailData);
    
    // Store email send record
    const storedMessages = getStoredCoachMessages();
    storedMessages.push({
      taskId: task.id,
      type: 'email',
      level: level,
      message: message,
      date: new Date().toISOString().split('T')[0],
      timestamp: new Date().toISOString(),
      emailData: emailData,
      sent: true // Will be false until backend confirms
    });
    saveCoachMessages(storedMessages);
  }
  
  // Main coach evaluation function
  function evaluateCoachMessages() {
    const today = new Date();
    
    tasks.forEach(task => {
      // Skip completed tasks
      if (task.completed) return;
      
      const daysUntilDeadline = getDaysUntilDeadline(task.deadline);
      const level = getUrgencyLevel(daysUntilDeadline);
      
      // Determine messaging frequency based on urgency
      let maxMessagesPerDay = 4; // Default for 7+ days before
      
      if (daysUntilDeadline < 0) {
        // Overdue: increase intensity
        const daysOverdue = Math.abs(daysUntilDeadline);
        if (daysOverdue >= 3) maxMessagesPerDay = 10;
        else if (daysOverdue >= 1) maxMessagesPerDay = 6;
        else maxMessagesPerDay = 4;
      } else if (daysUntilDeadline === 0) {
        maxMessagesPerDay = 6; // Deadline day
      } else if (daysUntilDeadline <= 6) {
        maxMessagesPerDay = 5; // Approaching deadline
      }
      
      const messageCountToday = getMessageCountToday(task.id);
      
      // Send messages if under daily limit
      if (messageCountToday < maxMessagesPerDay) {
        const message = getRandomPhrase(level, task.title);
        
        // Randomly choose delivery method (can send multiple)
        const methods = ['panel', 'popup', 'mobile', 'email'];
        const selectedMethod = methods[Math.floor(Math.random() * methods.length)];
        
        // Always send to panel
        sendCoachPanelMessage(task, level, message);
        
        // Additionally send via selected method
        if (selectedMethod === 'popup' && level !== 'low') {
          showCoachPopup(task, level, message);
        } else if (selectedMethod === 'mobile' && (level === 'high' || level === 'extreme')) {
          showCoachMobileAlert(task, level, message);
        } else if (selectedMethod === 'email') {
          sendCoachEmail(task, level, message);
        }
      }
    });
  }
  
  // Run coach evaluation on page load
  evaluateCoachMessages();
  
  // Run coach evaluation daily (check every hour)
  setInterval(() => {
    evaluateCoachMessages();
  }, 60 * 60 * 1000); // Every hour
  
  // Also run a lighter check every 15 minutes for extreme urgency tasks
  setInterval(() => {
    const extremeTasks = tasks.filter(t => {
      if (t.completed) return false;
      const days = getDaysUntilDeadline(t.deadline);
      return days < 0 && Math.abs(days) >= 3; // 3+ days overdue
    });
    
    extremeTasks.forEach(task => {
      const level = 'extreme';
      const message = getRandomPhrase(level, task.title);
      
      // Send high-frequency messages for extreme cases
      if (getMessageCountToday(task.id) < 20) { // Cap at 20/day even for extreme
        sendCoachPanelMessage(task, level, message);
        
        // Occasionally popup for extreme
        if (Math.random() > 0.7) {
          showCoachPopup(task, level, message);
        }
      }
    });
  }, 15 * 60 * 1000); // Every 15 minutes
  
</script>

</body>
</html>
